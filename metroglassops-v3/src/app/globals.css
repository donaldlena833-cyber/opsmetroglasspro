@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply border-gray-200 dark:border-dark-border;
  }

  body {
    @apply bg-cream-100 dark:bg-dark-bg text-navy-700 dark:text-dark-text antialiased;
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  /* Smooth scrolling */
  html {
    scroll-behavior: smooth;
    -webkit-tap-highlight-color: transparent;
  }

  /* Better touch targets */
  button, a, input, select, textarea {
    touch-action: manipulation;
  }

  /* Remove default focus outlines, use custom ones */
  :focus {
    outline: none;
  }

  /* V3: Custom scrollbar (softer) */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-cream-300 dark:bg-dark-border;
    border-radius: 10px;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-300 dark:bg-gray-600;
  }

  /* Number input without spinners */
  input[type="number"]::-webkit-outer-spin-button,
  input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  input[type="number"] {
    -moz-appearance: textfield;
  }
}

@layer components {
  /* V3: Page container with more generous padding */
  .page-container {
    @apply min-h-screen pb-28 px-5 pt-6;
  }

  /* V3: Page header */
  .page-header {
    @apply mb-8;
  }

  .page-title {
    @apply text-2xl font-bold text-navy-800 dark:text-dark-text;
  }

  .page-subtitle {
    @apply text-sm text-gray-500 dark:text-dark-muted mt-1;
  }

  /* V3: Empty state with softer styling */
  .empty-state {
    @apply flex flex-col items-center justify-center py-16 px-6 text-center;
  }

  .empty-state-icon {
    @apply w-16 h-16 text-gray-300 dark:text-gray-600 mb-4;
  }

  .empty-state-title {
    @apply text-lg font-semibold text-gray-600 dark:text-gray-400 mb-2;
  }

  .empty-state-description {
    @apply text-sm text-gray-400 dark:text-dark-muted;
  }

  /* Loading spinner */
  .loading-spinner {
    @apply animate-spin h-5 w-5 text-orange-500;
  }

  /* Form spacing */
  .form-section {
    @apply space-y-5;
  }

  /* V3: Stats card - extra rounded, floating shadow */
  .stat-card {
    @apply bg-white dark:bg-dark-card rounded-3xl p-5 shadow-card dark:shadow-card-dark;
  }

  .stat-label {
    @apply text-xs font-semibold text-gray-500 dark:text-dark-muted uppercase tracking-wide;
  }

  .stat-value {
    @apply text-2xl font-bold text-navy-800 dark:text-dark-text mt-1;
  }

  .stat-value-positive {
    @apply text-green-600 dark:text-green-400;
  }

  .stat-value-negative {
    @apply text-red-600 dark:text-red-400;
  }

  /* V3: List item - pillowy, more padding */
  .list-item {
    @apply bg-white dark:bg-dark-card rounded-3xl p-5 shadow-card dark:shadow-card-dark transition-all duration-200 active:scale-[0.98];
  }

  .list-item:hover {
    @apply shadow-card-hover;
  }

  /* Tab bar safe area */
  .tab-bar-safe-area {
    @apply pb-[calc(env(safe-area-inset-bottom)+88px)];
  }

  /* V3: Motivational message styling */
  .motivational-message {
    @apply text-sm text-orange-600 dark:text-orange-400 font-medium mt-2 animate-fade-in;
  }

  /* V3: Section title */
  .section-title {
    @apply text-lg font-bold text-navy-800 dark:text-dark-text mb-4;
  }

  /* V3: Subtle divider */
  .divider {
    @apply h-px bg-cream-200 dark:bg-dark-border my-4;
  }

  /* V3: Accent card (like the golden card in reference) */
  .accent-card {
    @apply bg-orange-100 dark:bg-orange-900/30 rounded-3xl p-5 border border-orange-200 dark:border-orange-800;
  }

  /* V3: Soft pill badge */
  .pill-badge {
    @apply inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold;
  }
}

@layer utilities {
  /* Safe area padding for PWA */
  .safe-top {
    padding-top: max(env(safe-area-inset-top), 12px);
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-right {
    padding-right: env(safe-area-inset-right);
  }

  /* Hide scrollbar but keep functionality */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Text truncation */
  .line-clamp-1 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
  }

  .line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
  }

  /* V3: Glassmorphism effect */
  .glass {
    @apply bg-white/70 dark:bg-dark-card/70 backdrop-blur-lg;
  }
}
